<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>input/charts/Plots.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Anim.html">Anim</a></li>
            
                <li><a href="../classes/AreaSeries.html">AreaSeries</a></li>
            
                <li><a href="../classes/AreaSplineSeries.html">AreaSplineSeries</a></li>
            
                <li><a href="../classes/Axis.html">Axis</a></li>
            
                <li><a href="../classes/AxisType.html">AxisType</a></li>
            
                <li><a href="../classes/BarSeries.html">BarSeries</a></li>
            
                <li><a href="../classes/BottomAxisLayout.html">BottomAxisLayout</a></li>
            
                <li><a href="../classes/CartesianChart.html">CartesianChart</a></li>
            
                <li><a href="../classes/CartesianSeries.html">CartesianSeries</a></li>
            
                <li><a href="../classes/CategoryAxis.html">CategoryAxis</a></li>
            
                <li><a href="../classes/Chart.html">Chart</a></li>
            
                <li><a href="../classes/ChartBase.html">ChartBase</a></li>
            
                <li><a href="../classes/ChartLegend.html">ChartLegend</a></li>
            
                <li><a href="../classes/ColumnSeries.html">ColumnSeries</a></li>
            
                <li><a href="../classes/ComboSeries.html">ComboSeries</a></li>
            
                <li><a href="../classes/ComboSplineSeries.html">ComboSplineSeries</a></li>
            
                <li><a href="../classes/CurveUtil.html">CurveUtil</a></li>
            
                <li><a href="../classes/Easing.html">Easing</a></li>
            
                <li><a href="../classes/EasingFoo.html">EasingFoo</a></li>
            
                <li><a href="../classes/EllipseGroup.html">EllipseGroup</a></li>
            
                <li><a href="../classes/Fills.html">Fills</a></li>
            
                <li><a href="../classes/Foo.Bar.html">Foo.Bar</a></li>
            
                <li><a href="../classes/Graph.html">Graph</a></li>
            
                <li><a href="../classes/Gridlines.html">Gridlines</a></li>
            
                <li><a href="../classes/GroupCircle.html">GroupCircle</a></li>
            
                <li><a href="../classes/GroupDiamond.html">GroupDiamond</a></li>
            
                <li><a href="../classes/GroupRect.html">GroupRect</a></li>
            
                <li><a href="../classes/Histogram.html">Histogram</a></li>
            
                <li><a href="../classes/HorizontalLegendLayout.html">HorizontalLegendLayout</a></li>
            
                <li><a href="../classes/JSON.html">JSON</a></li>
            
                <li><a href="../classes/LeftAxisLayout.html">LeftAxisLayout</a></li>
            
                <li><a href="../classes/Lines.html">Lines</a></li>
            
                <li><a href="../classes/LineSeries.html">LineSeries</a></li>
            
                <li><a href="../classes/Main.html">Main</a></li>
            
                <li><a href="../classes/MarkerSeries.html">MarkerSeries</a></li>
            
                <li><a href="../classes/myclass.html">myclass</a></li>
            
                <li><a href="../classes/mywidget.SubWidget.html">mywidget.SubWidget</a></li>
            
                <li><a href="../classes/mywidget.SubWidget2.html">mywidget.SubWidget2</a></li>
            
                <li><a href="../classes/mywidget.SuperWidget.html">mywidget.SuperWidget</a></li>
            
                <li><a href="../classes/NumericAxis.html">NumericAxis</a></li>
            
                <li><a href="../classes/OtherClass.html">OtherClass</a></li>
            
                <li><a href="../classes/OtherClass2.html">OtherClass2</a></li>
            
                <li><a href="../classes/P.storage.html">P.storage</a></li>
            
                <li><a href="../classes/P.storage.LocalStore.html">P.storage.LocalStore</a></li>
            
                <li><a href="../classes/P.storage.Store.html">P.storage.Store</a></li>
            
                <li><a href="../classes/PieChart.html">PieChart</a></li>
            
                <li><a href="../classes/PieSeries.html">PieSeries</a></li>
            
                <li><a href="../classes/Plots.html">Plots</a></li>
            
                <li><a href="../classes/Renderer.html">Renderer</a></li>
            
                <li><a href="../classes/RightAxisLayout.html">RightAxisLayout</a></li>
            
                <li><a href="../classes/ShapeGroup.html">ShapeGroup</a></li>
            
                <li><a href="../classes/SplineSeries.html">SplineSeries</a></li>
            
                <li><a href="../classes/StackedAreaSeries.html">StackedAreaSeries</a></li>
            
                <li><a href="../classes/StackedAreaSplineSeries.html">StackedAreaSplineSeries</a></li>
            
                <li><a href="../classes/StackedAxis.html">StackedAxis</a></li>
            
                <li><a href="../classes/StackedBarSeries.html">StackedBarSeries</a></li>
            
                <li><a href="../classes/StackedColumnSeries.html">StackedColumnSeries</a></li>
            
                <li><a href="../classes/StackedComboSeries.html">StackedComboSeries</a></li>
            
                <li><a href="../classes/StackedComboSplineSeries.html">StackedComboSplineSeries</a></li>
            
                <li><a href="../classes/StackedLineSeries.html">StackedLineSeries</a></li>
            
                <li><a href="../classes/StackedMarkerSeries.html">StackedMarkerSeries</a></li>
            
                <li><a href="../classes/StackedSplineSeries.html">StackedSplineSeries</a></li>
            
                <li><a href="../classes/StackingUtil.html">StackingUtil</a></li>
            
                <li><a href="../classes/TimeAxis.html">TimeAxis</a></li>
            
                <li><a href="../classes/TopAxisLayout.html">TopAxisLayout</a></li>
            
                <li><a href="../classes/VerticalLegendLayout.html">VerticalLegendLayout</a></li>
            
                <li><a href="../classes/YUI~dump.html">YUI~dump</a></li>
            
                <li><a href="../classes/YUI~oop.html">YUI~oop</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/anim.html">anim</a></li>
            
                <li><a href="../modules/anim-easing.html">anim-easing</a></li>
            
                <li><a href="../modules/anim-easing-foo.html">anim-easing-foo</a></li>
            
                <li><a href="../modules/charts.html">charts</a></li>
            
                <li><a href="../modules/charts-legend.html">charts-legend</a></li>
            
                <li><a href="../modules/dump.html">dump</a></li>
            
                <li><a href="../modules/ExampleModule.html">ExampleModule</a></li>
            
                <li><a href="../modules/foobar.html">foobar</a></li>
            
                <li><a href="../modules/graphics.html">graphics</a></li>
            
                <li><a href="../modules/json.html">json</a></li>
            
                <li><a href="../modules/json-parse.html">json-parse</a></li>
            
                <li><a href="../modules/json-stringify.html">json-stringify</a></li>
            
                <li><a href="../modules/myapp_views_index.html">myapp/views/index</a></li>
            
                <li><a href="../modules/mymodule.html">mymodule</a></li>
            
                <li><a href="../modules/mysubmodule.html">mysubmodule</a></li>
            
                <li><a href="../modules/oop.html">oop</a></li>
            
                <li><a href="../modules/P.storage.html">P.storage</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: input/charts/Plots.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Utility class used for drawing markers.
 *
 * @module charts
 * @class Plots
 * @constructor
 */
function Plots(cfg)
{
    var attrs = { 
        markers: {
            getter: function()
            {
                return this._markers;
            }
        }
    };
    this.addAttrs(attrs, cfg);
}

Plots.prototype = {
    /**
     * Storage for default marker styles.
     *
     * @property _plotDefaults
     * @type Object
     * @private
     */
    _plotDefaults: null,

    /**
     * Draws the markers
     *
     * @method drawPlots
     * @protected
     */
    drawPlots: function()
    {
        if(!this.get(&quot;xcoords&quot;) || this.get(&quot;xcoords&quot;).length &lt; 1) 
		{
			return;
		}
        var isNumber = Y_Lang.isNumber,
            style = Y.clone(this.get(&quot;styles&quot;).marker),
            w = style.width,
            h = style.height,
            xcoords = this.get(&quot;xcoords&quot;),
            ycoords = this.get(&quot;ycoords&quot;),
            i = 0,
            len = xcoords.length,
            top = ycoords[0],
            left,
            marker,
            offsetWidth = w/2,
            offsetHeight = h/2,
            xvalues,
            yvalues,
            fillColors = null,
            borderColors = null,
            graphOrder = this.get(&quot;graphOrder&quot;),
            groupMarkers = this.get(&quot;groupMarkers&quot;);
        if(groupMarkers)
        {
            xvalues = [];
            yvalues = [];
            for(; i &lt; len; ++i)
            {
                xvalues.push(parseFloat(xcoords[i] - offsetWidth));
                yvalues.push(parseFloat(ycoords[i] - offsetHeight));
            }
            this._createGroupMarker({
                xvalues: xvalues,
                yvalues: yvalues,
                fill: style.fill,
                border: style.border,
                dimensions: {
                    width: w,
                    height: h
                },
                graphOrder: graphOrder,
                shape: style.shape
            });
            return;
        }
        if(Y_Lang.isArray(style.fill.color))
        {
            fillColors = style.fill.color.concat(); 
        }
        if(Y_Lang.isArray(style.border.color))
        {
            borderColors = style.border.color.concat();
        }
        this._createMarkerCache();
        for(; i &lt; len; ++i)
        {
            top = parseFloat(ycoords[i] - offsetHeight);
            left = parseFloat(xcoords[i] - offsetWidth);            
            if(!isNumber(left) || !isNumber(top))
            {
                this._markers.push(null);
                continue;
            }
            if(fillColors)
            {
                style.fill.color = fillColors[i % fillColors.length];
            }
            if(borderColors)
            {
                style.border.color = borderColors[i % borderColors.length];
            }

            style.x = left;
            style.y = top;
            marker = this.getMarker(style, graphOrder, i);
        }
        this._clearMarkerCache();
    },

    /**
     * Pre-defined group shapes.
     *
     * @property _groupShapes
     * @private
     */
    _groupShapes: {
        circle: Y.CircleGroup,
        rect: Y.RectGroup,
        ellipse: Y.EllipseGroup,
        diamond: Y.DiamondGroup
    },

    /**
     * Returns the correct group shape class.
     *
     * @method _getGroupShape
     * @param {Shape | String} shape Indicates which shape class. 
     * @return Function
     * @protected
     */
    _getGroupShape: function(shape)
    {
        if(Y_Lang.isString(shape))
        {
            shape = this._groupShapes[shape];
        }
        return shape;
    },

    /**
     * Gets the default values for series that use the utility. This method is used by
     * the class&#x27; &#x60;styles&#x60; attribute&#x27;s getter to get build default values.
     *
     * @method _getPlotDefaults
     * @return Object
     * @protected
     */
    _getPlotDefaults: function()
    {
        var defs = {
            fill:{
                type: &quot;solid&quot;,
                alpha: 1,
                colors:null,
                alphas: null,
                ratios: null
            },
            border:{
                weight: 1,
                alpha: 1
            },
            width: 10,
            height: 10,
            shape: &quot;circle&quot;
        };
        defs.fill.color = this._getDefaultColor(this.get(&quot;graphOrder&quot;), &quot;fill&quot;);
        defs.border.color = this._getDefaultColor(this.get(&quot;graphOrder&quot;), &quot;border&quot;);
        return defs;
    },

    /**
     * Collection of markers to be used in the series.
     *
     * @property _markers
     * @type Array
     * @private
     */
    _markers: null,

    /**
     * Collection of markers to be re-used on a series redraw.
     *
     * @property _markerCache
     * @type Array
     * @private
     */
    _markerCache: null,
   
    /**
     * Gets and styles a marker. If there is a marker in cache, it will use it. Otherwise
     * it will create one.
     *
     * @method getMarker
     * @param {Object} styles Hash of style properties.
     * @param {Number} order Order of the series.
     * @param {Number} index Index within the series associated with the marker.
     * @return Shape
     * @protected
     */
    getMarker: function(styles, order, index)
    {
        var marker,
            border = styles.border;
        styles.id = this.get(&quot;chart&quot;).get(&quot;id&quot;) + &quot;_&quot; + order + &quot;_&quot; + index;
        //fix name differences between graphic layer
        border.opacity = border.alpha;
        styles.stroke = border;
        styles.fill.opacity = styles.fill.alpha;
        if(this._markerCache.length &gt; 0)
        {
            while(!marker)
            {
                if(this._markerCache.length &lt; 1)
                {
                    marker = this._createMarker(styles, order, index);
                    break;
                }
                marker = this._markerCache.shift();

            }
            marker.set(styles);
        }
        else
        {
            marker = this._createMarker(styles, order, index);
        }
        this._markers.push(marker);
        return marker;
    },
    
    /**
     * Creates a shape to be used as a marker.
     *
     * @method _createMarker
     * @param {Object} styles Hash of style properties.
     * @param {Number} order Order of the series.
     * @param {Number} index Index within the series associated with the marker.
     * @return Shape
     * @private
     */
    _createMarker: function(styles, order, index)
    {
        var graphic = this.get(&quot;graphic&quot;),
            marker,
            cfg = Y.clone(styles);
        graphic.set(&quot;autoDraw&quot;, false);
        cfg.type = cfg.shape;
        marker = graphic.addShape(cfg); 
        marker.addClass(SERIES_MARKER);
        return marker;
    },
    
    /**
     * Creates a cache of markers for reuse.
     *
     * @method _createMarkerCache
     * @private
     */
    _createMarkerCache: function()
    {
        if(this._groupMarker)
        {
            this._groupMarker.destroy();
            this._groupMarker = null;
        }
        if(this._markers &amp;&amp; this._markers.length &gt; 0)
        {
            this._markerCache = this._markers.concat();
        }
        else
        {
            this._markerCache = [];
        }
        this._markers = [];
    },
  
    /**
     * Draws a series of markers in a single shape instance.
     *
     * @method _createGroupMarkers
     * @param {Object} styles Set of configuration properties used to create the markers.
     * @protected
     */
    _createGroupMarker: function(styles)
    {
        var marker,
            markers = this.get(&quot;markers&quot;),
            border = styles.border,
            graphic,
            cfg,
            shape;
        if(markers &amp;&amp; markers.length &gt; 0)
        {
            while(markers.length &gt; 0)
            {
                marker = markers.shift();
                marker.destroy();
            }
            this.set(&quot;markers&quot;, []);
        }
        //fix name differences between graphic layer
        border.opacity = border.alpha;
        cfg = {
            id: this.get(&quot;chart&quot;).get(&quot;id&quot;) + &quot;_&quot; + styles.graphOrder,
            stroke: border,
            fill: styles.fill,
            dimensions: styles.dimensions,
            xvalues: styles.xvalues,
            yvalues: styles.yvalues
        };
        cfg.fill.opacity = styles.fill.alpha;
        shape = this._getGroupShape(styles.shape);
        if(shape)
        {
            cfg.type = shape;
        }
        if(styles.hasOwnProperty(&quot;radius&quot;) &amp;&amp; !isNaN(styles.radius))
        {
            cfg.dimensions.radius = styles.radius;
        }
        if(this._groupMarker)
        {
            this._groupMarker.destroy();
        }
        graphic = this.get(&quot;graphic&quot;);
        graphic.set(&quot;autoDraw&quot;, true);
        this._groupMarker = graphic.addShape(cfg);
    },

    /**
     * Toggles visibility
     *
     * @method _toggleVisible
     * @param {Boolean} visible indicates visibilitye
     * @private
     */
    _toggleVisible: function(visible)
    {
        var marker,
            markers = this.get(&quot;markers&quot;),
            i = 0,
            len;
        if(markers)
        {
            len = markers.length;
            for(; i &lt; len; ++i)
            {
                marker = markers[i];
                if(marker)
                {
                    marker.set(&quot;visible&quot;, visible);
                }
            }
        }
    },

    /**
     * Removes unused markers from the marker cache
     *
     * @method _clearMarkerCache
     * @private
     */
    _clearMarkerCache: function()
    {
        var marker;
        while(this._markerCache.length &gt; 0)
        {
            marker = this._markerCache.shift();
            if(marker)
            {
                marker.destroy();
            }
        }
    },

    /**
     * Resizes and positions markers based on a mouse interaction.
     *
     * @method updateMarkerState
     * @param {String} type state of the marker
     * @param {Number} i index of the marker
     * @protected
     */
    updateMarkerState: function(type, i)
    {
        if(this._markers &amp;&amp; this._markers[i])
        {
            var w,
                h,
                styles = Y.clone(this.get(&quot;styles&quot;).marker),
                state = this._getState(type),
                xcoords = this.get(&quot;xcoords&quot;),
                ycoords = this.get(&quot;ycoords&quot;),
                marker = this._markers[i],
                markerStyles = state == &quot;off&quot; || !styles[state] ? styles : styles[state]; 
                markerStyles.fill.color = this._getItemColor(markerStyles.fill.color, i);
                markerStyles.border.color = this._getItemColor(markerStyles.border.color, i);
                markerStyles.stroke = markerStyles.border;
                marker.set(markerStyles);
                w = markerStyles.width;
                h = markerStyles.height;
                marker.set(&quot;x&quot;, (xcoords[i] - w/2));
                marker.set(&quot;y&quot;,  (ycoords[i] - h/2));
                marker.set(&quot;visible&quot;, this.get(&quot;visible&quot;));
        }
    },

    /**
     * Parses a color from an array.
     *
     * @method _getItemColor
     * @param {Array} val collection of colors
     * @param {Number} i index of the item
     * @return String
     * @protected
     */
    _getItemColor: function(val, i)
    {
        if(Y_Lang.isArray(val))
        {
            return val[i % val.length];
        }
        return val;
    },

    /**
     * Method used by &#x60;styles&#x60; setter. Overrides base implementation.
     *
     * @method _setStyles
     * @param {Object} newStyles Hash of properties to update.
     * @return Object
     * @protected
     */
    _setStyles: function(val)
    {
        val = this._parseMarkerStyles(val);
        return Y.Renderer.prototype._setStyles.apply(this, [val]);
    },

    /**
     * Combines new styles with existing styles.
     *
     * @method _parseMarkerStyles
     * @param {Object} Object containing style properties for the marker.
     * @return Object
     * @private
     */
    _parseMarkerStyles: function(val)
    {
        if(val.marker)
        {
            var defs = this._getPlotDefaults();
            val.marker = this._mergeStyles(val.marker, defs);
            if(val.marker.over)
            {
                val.marker.over = this._mergeStyles(val.marker.over, val.marker);
            }
            if(val.marker.down)
            {
                val.marker.down = this._mergeStyles(val.marker.down, val.marker);
            }
        }
        return val;
    },

    /**
     * Returns marker state based on event type
     *
     * @method _getState
     * @param {String} type event type
     * @return String
     * @protected
     */
    _getState: function(type)
    {
        var state;
        switch(type)
        {
            case &quot;mouseout&quot; :
                state = &quot;off&quot;;
            break;
            case &quot;mouseover&quot; :
                state = &quot;over&quot;;
            break;
            case &quot;mouseup&quot; :
                state = &quot;over&quot;;
            break;
            case &quot;mousedown&quot; :
                state = &quot;down&quot;;
            break;
        }
        return state;
    },
    
    /**
     * @property _statSyles
     * @type Object
     * @private
     */
    _stateSyles: null
};

Y.augment(Plots, Y.Attribute);
Y.Plots = Plots;

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
